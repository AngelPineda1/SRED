@page
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agregar Equipo Tipo</title>
    <link rel="stylesheet" href="~/css/estilos.css" />
</head>
<body>
    <header>
        <a href="/Admin/Equipos/AgregarEquipo">
            <img src="~/assets/arrow-left-solid.svg" alt="" id="btn-regresar" />
        </a>
        <a href="/Admin/Equipos/AgregarEquipo(Lab)"
           id="btn-accion"
           class="sig-btn">
            <img src="~/assets/arrow-right-solid.svg" alt="" />
        </a>
    </header>
    <main id="main-agregarEquipo">
        <label for="">Tipo de equipo</label>
        <div id="grid">
           
        </div>
    </main>
</body>
</html>
<script>
    function cambiarColorAlSeleccionar() {
        let opciones = document.querySelectorAll(".opcion");

        opciones.forEach((e) => {
            e.addEventListener("click", function () {
                
                opciones.forEach(opcion => opcion.classList.remove("opcion-seleccionada"));

                
                e.classList.add("opcion-seleccionada");
            });
        });
    }

    
    const div = document.getElementById("grid");
    async function cargarEquipos() {

        div.innerHTML = '<label>Cargando...</label>';
        try {

            const response = await fetch('https://sredapi.websitos256.com/api/Tipo');
            const data = await response.json();
            div.innerHTML = '';
            data.forEach(aula => {

                const span = document.createElement('span');
                span.classList.add('opcion');

                const picture = document.createElement('picture');
                const source = document.createElement('source');
                const mimeType = "image/jpg";
                source.srcset = `data:${mimeType};base64,${aula.icono}`;
                source.type = aula.mimeType;
                picture.appendChild(source);


                const imgFallback = document.createElement('img');
                imgFallback.src = `data:${mimeType};base64,${aula.icono}`;
                imgFallback.alt = "icono";


                picture.appendChild(imgFallback);
                const labelNombre = document.createElement('label');
                labelNombre.textContent = aula.nombre;


                span.appendChild(picture);
                span.appendChild(labelNombre);

                div.appendChild(span);




            });
            cambiarColorAlSeleccionar();

        } catch (error) {
            console.error('Error:', error);
        }
    }


    cargarEquipos();
</script>
